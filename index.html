<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Para Ale üíò</title>
  <style>
    :root{
      --bg1:#060818;
      --bg2:#02030b;
      --text:#f7f7ff;
      --muted: rgba(255,255,255,.75);
      --card: rgba(18, 22, 44, .72);
      --card2: rgba(18, 22, 44, .92);
      --border: rgba(255,255,255,.14);
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --red:#ff2d55;
      --red2:#ff4d6d;
      --glow: 0 0 24px rgba(255,45,85,.55);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      overflow:hidden;
      background: radial-gradient(1200px 900px at 50% 30%, var(--bg1), var(--bg2));
    }

    /* Fondo estrellado (3 capas) */
    .stars, .stars::before, .stars::after{
      position:absolute; inset:0;
      background-repeat: repeat;
      background-size: 420px 420px;
      opacity:.9;
      content:"";
      display:block;
      filter: drop-shadow(0 0 2px rgba(255,255,255,.18));
      animation: drift 80s linear infinite;
    }
    .stars{
      background-image:
        radial-gradient(1px 1px at 20px 30px, rgba(255,255,255,.85) 50%, transparent 55%),
        radial-gradient(1px 1px at 70px 90px, rgba(255,255,255,.55) 50%, transparent 55%),
        radial-gradient(1px 1px at 120px 160px, rgba(255,255,255,.8) 50%, transparent 55%),
        radial-gradient(1px 1px at 220px 240px, rgba(255,255,255,.65) 50%, transparent 55%),
        radial-gradient(1px 1px at 310px 110px, rgba(255,255,255,.6) 50%, transparent 55%);
    }
    .stars::before{
      background-size: 520px 520px;
      opacity:.55;
      animation-duration: 120s;
      background-image:
        radial-gradient(1px 1px at 35px 200px, rgba(255,255,255,.75) 50%, transparent 55%),
        radial-gradient(1px 1px at 180px 60px, rgba(255,255,255,.55) 50%, transparent 55%),
        radial-gradient(1px 1px at 260px 340px, rgba(255,255,255,.7) 50%, transparent 55%),
        radial-gradient(1px 1px at 460px 420px, rgba(255,255,255,.55) 50%, transparent 55%);
    }
    .stars::after{
      background-size: 760px 760px;
      opacity:.35;
      animation-duration: 160s;
      background-image:
        radial-gradient(1px 1px at 90px 500px, rgba(255,255,255,.6) 50%, transparent 55%),
        radial-gradient(1px 1px at 520px 130px, rgba(255,255,255,.55) 50%, transparent 55%),
        radial-gradient(1px 1px at 650px 690px, rgba(255,255,255,.65) 50%, transparent 55%);
    }
    @keyframes drift{
      from{ transform: translate3d(0,0,0) }
      to{ transform: translate3d(-420px, -420px, 0) }
    }

    /* Layout */
    .wrap{
      position:relative;
      height:100vh;
      display:grid;
      place-items:center;
      padding: 24px;
      z-index:1;
    }
    h1{
      position:absolute;
      top: 22px;
      left: 50%;
      transform: translateX(-50%);
      margin:0;
      text-align:center;
      font-weight:800;
      letter-spacing:.6px;
      font-size: clamp(22px, 3.8vw, 44px);
      text-shadow: 0 8px 30px rgba(0,0,0,.55);
      user-select:none;
    }
    .sub{
      position:absolute;
      top: 72px;
      left: 50%;
      transform: translateX(-50%);
      margin:0;
      font-size: 14px;
      color: var(--muted);
      user-select:none;
    }

    /* Coraz√≥n */
    .heart-area{
      display:grid;
      place-items:center;
      gap: 14px;
      transform: translateY(10px);
    }
    .hint{
      font-size: 14px;
      color: var(--muted);
      text-align:center;
      user-select:none;
    }
    .heart-btn{
      appearance:none;
      border:none;
      background:transparent;
      cursor:pointer;
      outline:none;
      padding: 0;
      width: min(240px, 62vw);
      height: min(240px, 62vw);
      position:relative;
      filter: drop-shadow(0 18px 55px rgba(0,0,0,.55));
      transition: transform .15s ease;
    }
    .heart-btn:active{ transform: scale(.98) }

    .heart{
      width: 100%;
      height: 100%;
      position:absolute;
      inset:0;
      transform: rotate(-45deg);
      border-radius: 18px;
      background: radial-gradient(80% 80% at 30% 30%, var(--red2), var(--red));
      box-shadow: var(--glow);
      animation: beat 1.05s ease-in-out infinite;
    }
    .heart::before, .heart::after{
      content:"";
      position:absolute;
      width: 100%;
      height: 100%;
      background: inherit;
      border-radius: 50%;
      box-shadow: inherit;
    }
    .heart::before{ top: -50%; left: 0 }
    .heart::after{ top: 0; left: 50% }

    /* brillo */
    .spark{
      position:absolute;
      inset:-18px;
      border-radius: 24px;
      background: radial-gradient(circle at 35% 25%, rgba(255,255,255,.35), transparent 40%),
                  radial-gradient(circle at 60% 70%, rgba(255,255,255,.12), transparent 45%);
      transform: rotate(-45deg);
      pointer-events:none;
      opacity:.85;
      animation: shimmer 2.4s ease-in-out infinite;
    }
    @keyframes beat{
      0%, 100%{ transform: rotate(-45deg) scale(1) }
      20%{ transform: rotate(-45deg) scale(1.06) }
      45%{ transform: rotate(-45deg) scale(0.98) }
      70%{ transform: rotate(-45deg) scale(1.08) }
    }
    @keyframes shimmer{
      0%,100%{ opacity:.72; filter: blur(0px) }
      50%{ opacity:.95; filter: blur(.3px) }
    }

    /* Modal carta */
    .backdrop{
      position:absolute;
      inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      place-items:center;
      padding: 22px;
      z-index: 5;
    }
    .backdrop.show{ display:grid; animation: fadeIn .2s ease-out }
    @keyframes fadeIn{ from{opacity:0} to{opacity:1} }

    .card{
      width: min(720px, 92vw);
      border-radius: 22px;
      background: linear-gradient(180deg, var(--card), var(--card2));
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      overflow:hidden;
      transform: translateY(8px);
      animation: pop .22s ease-out;
    }
    @keyframes pop{ from{transform: translateY(16px) scale(.98); opacity:.8} to{transform: translateY(8px) scale(1); opacity:1} }

    .card-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 16px 18px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      gap: 12px;
    }
    .tag{
      display:inline-flex;
      gap:10px;
      align-items:center;
      font-weight:700;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: var(--red);
      box-shadow: 0 0 18px rgba(255,45,85,.55);
    }
    .close{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 12px;
      padding: 10px 12px;
      cursor:pointer;
      transition: background .15s ease, transform .15s ease;
    }
    .close:hover{ background: rgba(255,255,255,.10) }
    .close:active{ transform: scale(.98) }

    .card-body{
      padding: 18px;
      display:grid;
      gap: 14px;
      line-height: 1.55;
    }
    .letter{
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 18px;
      padding: 16px;
    }
    .letter p{ margin: 0 0 10px 0; color: rgba(255,255,255,.92) }
    .letter p:last-child{ margin-bottom: 0 }

    .controls{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items:center;
      justify-content: space-between;
    }
    .btn{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: var(--text);
      border-radius: 14px;
      padding: 12px 14px;
      cursor:pointer;
      font-weight:700;
      transition: background .15s ease, transform .15s ease;
    }
    .btn:hover{ background: rgba(255,255,255,.12) }
    .btn:active{ transform: scale(.99) }
    .btn.primary{
      border-color: rgba(255,45,85,.45);
      background: rgba(255,45,85,.16);
      box-shadow: 0 0 20px rgba(255,45,85,.18);
    }
    .small{
      font-size: 13px;
      color: var(--muted);
    }

    /* Extra: accesibilidad foco */
    :focus-visible{
      outline: 3px solid rgba(255,45,85,.55);
      outline-offset: 3px;
      border-radius: 12px;
    }
  </style>
</head>
<body>
  <div class="stars" aria-hidden="true"></div>

  <main class="wrap">
    <h1>Feliz 14 de febrero üíò</h1>
    <p class="sub">Para Ale ‚Äî toca el coraz√≥n</p>

    <section class="heart-area" aria-label="Regalo">
      <button class="heart-btn" id="openLetter" aria-haspopup="dialog" aria-controls="letterModal" aria-label="Abrir carta">
        <div class="heart"></div>
        <div class="spark"></div>
      </button>
      <div class="hint">‚ú® T√≥calo para abrir tu carta ‚ú®</div>
    </section>

    <!-- Modal -->
    <div class="backdrop" id="letterModal" role="dialog" aria-modal="true" aria-label="Carta para Ale">
      <article class="card">
        <header class="card-head">
          <div class="tag"><span class="dot"></span> Carta para Ale</div>
          <button class="close" id="closeLetter" type="button">Cerrar ‚úï</button>
        </header>

        <div class="card-body">
          <div class="letter">
            <p><strong>Ale,</strong></p>
            <p>
              Hoy solo quer√≠a recordarte algo simple: me alegra much√≠simo que existas en mi vida.
              Gracias por tu forma de ser, por tu risa, y por estar incluso cuando no dices nada.
            </p>
            <p>
              No es una carta ‚Äúrom√°ntica‚Äù perfecta‚Ä¶ es una carta de <strong>amistad bonita</strong>,
              de esas que se quedan. üíû
            </p>
            <p>
              Con cari√±o: <em>tu amigo kokito</em> üåô
            </p>
          </div>

          <div class="controls">
            <button class="btn primary" id="toggleAudio" type="button">‚ñ∂ Reproducir canci√≥n</button>
            <span class="small" id="audioStatus">Listo (usa un audio tuyo en /song.mp3)</span>
          </div>

          <!-- Audio: coloca un archivo "song.mp3" en la misma carpeta que este HTML -->
          <audio id="song" preload="auto">
            <source src="song.mp3" type="audio/mpeg" />
          </audio>

          <p class="small">
            Tip: si quieres que sea ‚Äúsolo una parte‚Äù, edita tu mp3 para que dure 10‚Äì20s y gu√°rdalo como <strong>song.mp3</strong>.
          </p>
        </div>
      </article>
    </div>
  </main>

  <script>
    const openBtn = document.getElementById('openLetter');
    const modal = document.getElementById('letterModal');
    const closeBtn = document.getElementById('closeLetter');

    const audio = document.getElementById('song');
    const toggleAudio = document.getElementById('toggleAudio');
    const audioStatus = document.getElementById('audioStatus');

    function openModal(){
      modal.classList.add('show');
      // Para evitar que el scroll del body se mueva en m√≥vil
      document.body.style.overflow = 'hidden';
      closeBtn.focus();
    }
    function closeModal(){
      modal.classList.remove('show');
      document.body.style.overflow = 'hidden'; // body ya est√° sin scroll por dise√±o, se mantiene
      // Pausar audio al cerrar (opcional)
      if(!audio.paused){
        audio.pause();
        audio.currentTime = 0;
        toggleAudio.textContent = '‚ñ∂ Reproducir canci√≥n';
        audioStatus.textContent = 'Pausado';
      }
      openBtn.focus();
    }

    openBtn.addEventListener('click', openModal);
    closeBtn.addEventListener('click', closeModal);

    // Cerrar tocando fuera de la carta
    modal.addEventListener('click', (e) => {
      if(e.target === modal) closeModal();
    });

    // ESC para cerrar
    window.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && modal.classList.contains('show')) closeModal();
    });

    // Audio (reproducir/pausar)
    toggleAudio.addEventListener('click', async () => {
      try{
        if(audio.paused){
          await audio.play(); // requiere interacci√≥n del usuario (ya la hay)
          toggleAudio.textContent = '‚è∏ Pausar';
          audioStatus.textContent = 'Reproduciendo‚Ä¶';
        }else{
          audio.pause();
          toggleAudio.textContent = '‚ñ∂ Reproducir canci√≥n';
          audioStatus.textContent = 'Pausado';
        }
      }catch(err){
        audioStatus.textContent = 'No se pudo reproducir. Aseg√∫rate de tener song.mp3 junto al HTML.';
      }
    });

    audio.addEventListener('ended', () => {
      toggleAudio.textContent = '‚ñ∂ Reproducir canci√≥n';
      audioStatus.textContent = 'Termin√≥';
    });
  </script>
</body>
</html>
